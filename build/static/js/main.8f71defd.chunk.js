(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,n){e.exports=n(94)},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),c=n.n(o),i=n(19),l=n(10),s=n(39),u=n.n(s),p=n(40),h=n(6),g=n(41),d=n.n(g),m=function(){var e=localStorage.getItem("token");return d.a.create({baseURL:"https://team-bubl-api.herokuapp.com/api",headers:{Authorization:e}})},S={error:"",fetchingSchool:!1,loggingIn:!1,signingUp:!1,schoolData:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_START":return Object(h.a)({},e,{error:"",loggingIn:!0});case"LOGIN_SUCCESS":return Object(h.a)({},e,{loggingIn:!1,error:""});case"FETCH_SCHOOLS_START":return Object(h.a)({},e,{error:"",fetchingSchool:!0});case"FETCH_SCHOOLS_SUCCESS":return Object(h.a)({},e,{fetchingSchool:!1,schoolData:t.payload});case"FETCH_SCHOOLS_FAILURE":return Object(h.a)({},e,{error:t.payload,fetchingSchool:!1});case"SIGNUP_START":return Object(h.a)({},e,{error:"",signingUp:!0});case"SIGNUP_SUCCESS":return Object(h.a)({},e,{signingUp:!1,error:""});case"SIGNUP_FAILURE":return Object(h.a)({},e,{signingUp:!1,error:t.payload});default:return e}},E=n(12),O=n(11),b=n(13),C=n(14),y=n(15),_=n(17),j=n(16),v=n(18),U=n(24),T=n.n(U),w=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={credentials:{username:"",password:""}},n.handleChange=function(e){n.setState({credentials:Object(h.a)({},n.state.credentials,Object(b.a)({},e.target.name,e.target.value))})},n.login=function(e){e.preventDefault(),n.props.login(n.state.credentials).then(function(e){e&&n.props.history.push("/protected")})},n}return Object(v.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.login},r.a.createElement("input",{type:"text",name:"username",value:this.state.credentials.username,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",value:this.state.credentials.password,onChange:this.handleChange}),r.a.createElement("button",null,this.props.loggingIn?r.a.createElement(T.a,{type:"ThreeDots",color:"#1f2a38",height:"12",width:"26"}):"Log in")))}}]),t}(r.a.Component),I=Object(l.b)(function(e){return{error:e.error,loggingIn:e.loggingIn}},{login:function(e){return function(t){return t({type:"LOGIN_START"}),m().post("/auth/login",e).then(function(e){return localStorage.setItem("token",e.data.token),t({type:"LOGIN_SUCCESS",payload:e.data.user}),!0}).catch(function(e){return console.log(e.response)})}}})(w),D=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={newUser:{username:"",password:"",audit_id:""},schoolData:[]},n.handleChange=function(e){n.setState({newUser:Object(h.a)({},n.state.newUser,Object(b.a)({},e.target.name,e.target.value))})},n.signup=function(e){e.preventDefault(),n.props.signup(n.state).then(function(e){e&&n.props.history.push("/protected")})},n}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.getSchools()}},{key:"render",value:function(){return r.a.createElement("div",{className:"delete-this-div"},r.a.createElement("form",{onSubmit:this.signup},r.a.createElement("select",{name:"audit_id",value:this.state.audit_id,onChange:this.handleChange},this.props.schoolData.map(function(e){return r.a.createElement("option",{key:e.audit_id,value:e.audit_id},e.school)})),r.a.createElement("input",{type:"text",name:"username",value:this.state.newUser.username,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",value:this.state.newUser.password,onChange:this.handleChange}),r.a.createElement("button",null,this.props.signingUp?r.a.createElement(T.a,{type:"ThreeDots",color:"#1f2a38",height:"12",width:"26"}):"Sign Up")))}}]),t}(r.a.Component),A=Object(l.b)(function(e){return{error:e.error,signingUp:e.signingUp,fetchingSchool:e.fetchingSchool,schoolData:e.schoolData}},{signup:function(e){return function(t){return t({type:"SIGNUP_START"}),m().post("/auth/register",e).then(function(e){return localStorage.setItem("token",e.data.token),t({type:"SIGNUP_SUCCESS",payload:e.data.user}),!0}).catch(function(e){return console.log(e.response)})}},getSchools:function(){return function(e){e({type:"FETCH_SCHOOLS_START"}),m().get("/school").then(function(t){e({type:"FETCH_SCHOOLS_SUCCESS",payload:t.data})}).catch(function(t){e({type:"FETCH_SCHOOLS_FAILURE",payload:t.response.data.error})})}}})(D),L=function(e){function t(){return Object(C.a)(this,t),Object(_.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.getData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"delete-this-div"},r.a.createElement("p",null,"Dashboard"))}}]),t}(r.a.Component),k=Object(O.f)(Object(l.b)(function(e){return{error:e.error,someData:e.someData,fetchingData:e.fetchingData}},{getData:function(){return function(e){e({type:"FETCH_DATA_START"}),m().get("/data").then(function(t){e({tpye:"FETCH_DATA_SUCCESS",payload:t.data.data})}).catch(function(t){e({type:"FETCH_DATA_FAILURE",payload:t.response.data.error})})}}})(L)),H=n(43),N=function(e){var t=e.component,n=Object(H.a)(e,["component"]);return r.a.createElement(O.b,Object.assign({},n,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(O.a,{to:"/login"})}}))};n(92);var F=function(){return r.a.createElement(E.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Bubl")),r.a.createElement("main",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(E.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(E.b,{to:"/signup"},"Signup")),r.a.createElement("li",null,r.a.createElement(E.b,{to:"/protected"},"Protected Page"))),r.a.createElement(O.b,{path:"/login",component:I}),r.a.createElement(O.b,{path:"/signup",component:A}),r.a.createElement(N,{exact:!0,path:"/protected",component:k}))))},R=(n(93),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c),G=Object(i.d)(f,R(Object(i.a)(p.a,u.a))),P=document.getElementById("root");c.a.render(r.a.createElement(l.a,{store:G},r.a.createElement(F,null)),P)}},[[44,1,2]]]);
//# sourceMappingURL=main.8f71defd.chunk.js.map